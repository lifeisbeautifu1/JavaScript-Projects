(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var o=e.g.document;if(!t&&o&&(o.currentScript&&(t=o.currentScript.src),!t)){var s=o.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t={ArrowLeft:{code:37,movement:-1,rotation:180},ArrowUp:{code:38,movement:-20,rotation:270},ArrowRight:{code:39,movement:1,rotation:0},ArrowDown:{code:40,movement:20,rotation:90}},o="wall",s="dot",i="blinky",r="pinky",n="inky",c="clyde",d="pill",a="pacman",l="ghost",h="scared",m="lair",p="teleport-right",u="teleport-left",v=["blank",o,s,i,r,n,c,d,a,m,p,u],w=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,7,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,7,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1,1,2,2,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,2,1,1,1,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,1,1,0,0,0,1,2,1,2,2,2,2,2,2,2,2,1,2,1,0,0,0,0,0,0,1,2,1,2,1,9,9,9,9,1,2,1,2,1,0,0,0,1,1,1,1,2,1,2,1,9,9,9,9,1,2,1,2,1,1,1,1,10,0,0,0,2,2,2,1,9,9,9,9,1,2,2,2,0,0,0,11,1,1,1,1,2,1,2,1,9,9,9,9,1,2,1,2,1,1,1,1,0,0,0,1,2,1,2,1,1,1,1,1,1,2,1,2,1,0,0,0,0,0,0,1,2,1,2,0,0,0,0,0,0,2,1,2,1,0,0,0,1,1,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,1,1,1,2,2,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,2,1,1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,7,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,7,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];function b(e,s,i){let r=s,n=e+r.movement;const c=Object.keys(t);for(;i(n,o)||i(n,l);){const o=c[Math.floor(Math.random()*c.length)];r=t[o],n=e+r.movement}return{nextMovePos:n,direction:r}}const f=class{constructor(e=5,o,s,i){this.name=i,this.speed=e,this.movement=s,this.startPos=o,this.pos=o,this.dir=t.ArrowRight,this.timer=0,this.isScared=!1,this.rotation=!1}shouldMove(){return this.timer===this.speed?(this.timer=0,!0):(this.timer++,!1)}getNextMove(e){const{nextMovePos:t,direction:o}=this.movement(this.pos,this.dir,e);return{nextMovePos:t,direction:o}}makeMove(){const e=[l,h,this.name];let t=[l,this.name];return this.isScared&&(t=[...t,h]),{classesToRemove:e,classesToAdd:t}}setNewPos(e,t){this.pos=e,this.dir=t}},g=e.p+"d080918aa7f501e4778ab9a72da81fbe.wav",y=e.p+"bdc3f5f314a2181a90fe99f24c06b72d.wav",E=e.p+"91d7a56437791b5cd727194f556df418.wav",j=e.p+"d963658330ffc504e5657e9150269caa.wav",x=e.p+"8065f9c8240bd96517e9db6b0141e250.wav",M=document.querySelector("#game"),k=document.querySelector("#score"),L=document.querySelector("#start-button"),O=document.querySelector(".mobile-control"),C=document.querySelector(".up"),P=document.querySelector(".down"),T=document.querySelector(".left"),S=document.querySelector(".right"),A=class{constructor(e){this.dotCount=0,this.grid=[],this.DOMGrid=e}showGameStatus(e){const t=document.createElement("div");t.classList.add("game-status"),t.innerHTML=e?"WIN!":"GAME OVER!",this.DOMGrid.appendChild(t)}createGrid(e){this.dotCount=0,this.grid=[],this.DOMGrid.innerHTML="",this.DOMGrid.style.cssText="grid-template-columns: repeat(20, 20px)",e.forEach((e=>{const t=document.createElement("div");t.classList.add("square",v[e]),t.style.cssText="\n      width: 20px;\n      height: 20px;\n      ",this.DOMGrid.appendChild(t),this.grid.push(t),v[e]==s&&this.dotCount++}))}addObject(e,t){this.grid[e].classList.add(...t)}removeObject(e,t){this.grid[e].classList.remove(...t)}objectExist=(e,t)=>this.grid[e].classList.contains(t);rotateDiv(e,t){this.grid[e].style.transform=`rotate(${t}deg)`}moveCharacter(e){if(e.shouldMove()){const{nextMovePos:t,direction:o}=e.getNextMove(this.objectExist),{classesToRemove:s,classesToAdd:i}=e.makeMove();e.rotation&&t!==e.pos&&(this.rotateDiv(t,e.dir.rotation),this.rotateDiv(e.pos,0)),this.removeObject(e.pos,s),this.addObject(t,i),e.setNewPos(t,o)}}static createGameBoard(e,t){const o=new this(e);return o.createGrid(t),o}}.createGameBoard(M,w);let G=0,I=null,D=!1,q=!1,N=null,R=0;function K(e){new Audio(e).play()}function $(e,t){K(j),D?(R+=G,document.removeEventListener("keydown",(e=>{pacman.handleKeyInput(e,A.objectExist)})),clearInterval(I),setTimeout(W,2e3)):(document.removeEventListener("keydown",(e=>{pacman.handleKeyInput(e,A.objectExist)})),A.showGameStatus(D),clearInterval(I),R=0,L.classList.remove("hide"),O.classList.add("hide"))}function B(e,t){const o=t.find((t=>e.pos===t.pos));o&&(e.powerPill?(K(x),A.removeObject(o.pos,[l,h,o.name]),o.pos=o.startPos,G+=100):(A.removeObject(e.pos,[a]),A.rotateDiv(e.pos,0),$()))}let H=!1;function W(){K(E),D=!1,q=!1,G=R,L.classList.add("hide"),console.log(H),H&&O.classList.remove("hide"),A.createGrid(w);const e=new class{constructor(e,t){this.pos=t,this.speed=e,this.dir=null,this.timer=0,this.powerPill=!1,this.rotation=!0}shouldMove(){return!!this.dir&&(this.timer===this.speed?(this.timer=0,!0):void this.timer++)}getNextMove(e){let t=this.pos+this.dir.movement;return(e(t,o)||e(t,m))&&(t=this.pos),{nextMovePos:t,direction:this.dir}}makeMove(){return{classesToRemove:[a],classesToAdd:[a]}}setNewPos(e){this.pos=e}handleKeyInput(e,s){let i;if(!(e.keyCode>=37&&e.keyCode<=40))return;i=t[e.key];const r=this.pos+i.movement;s(r,o)||s(r,m)||(this.dir=i)}handleClickInput(e,s){let i;i=t[e];const r=this.pos+i.movement;s(r,o)||s(r,m)||(this.dir=i)}}(2,287);A.addObject(287,[a]),document.addEventListener("keydown",(t=>{e.handleKeyInput(t,A.objectExist)})),C.addEventListener("click",(()=>{e.handleClickInput("ArrowUp",A.objectExist)})),P.addEventListener("click",(()=>{e.handleClickInput("ArrowDown",A.objectExist)})),T.addEventListener("click",(()=>{e.handleClickInput("ArrowLeft",A.objectExist)})),S.addEventListener("click",(()=>{e.handleClickInput("ArrowRight",A.objectExist)}));const l=[new f(5,188,b,i),new f(4,209,b,r),new f(3,230,b,n),new f(2,251,b,c)];I=setInterval((()=>function(e,t){A.moveCharacter(e),B(e,t),t.forEach((e=>A.moveCharacter(e))),B(e,t),A.objectExist(e.pos,s)&&(K(g),A.removeObject(e.pos,[s]),A.dotCount--,G+=10),A.objectExist(e.pos,p)&&-1===e.dir.movement?(A.removeObject(e.pos,[a]),e.pos=240):A.objectExist(e.pos,u)&&1===e.dir.movement&&(A.removeObject(e.pos,[a]),e.pos=219),A.objectExist(e.pos,d)&&(K(y),A.removeObject(e.pos,[d]),e.powerPill=!0,G+=50,clearTimeout(N),N=setTimeout((()=>e.powerPill=!1),1e4)),e.powerPill!==q&&(q=e.powerPill,t.forEach((t=>t.isScared=e.powerPill))),0===A.dotCount&&(D=!0,$()),k.innerHTML=G}(e,l)),70)}document.addEventListener("DOMContentLoaded",(e=>{console.log(window.outerWidth),window.outerWidth<508&&(H=!0)})),L.addEventListener("click",W)})();